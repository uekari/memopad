<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>myMemoPadä¸­ç´š</title>
    <link rel="stylesheet" href="/memo3.css">
</head>

<body>
    <header>
        <img src="/img/IMG_4205.JPG" alt="top_img">
        <h1>ã‚·ãƒ•ãƒˆç®¡ç†</h1>
        <p>å…¨ã¦å…¥åŠ›ã—ã¦<br>é€ä¿¡ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã­â™ª</p>
    </header>

    <main>
        <div class="main">
            <div class="name">
                åå‰ï¼š<select id="name" name="name">
                    <option selected> --- </option>
                    <option>ç¾ä¹Ÿå­</option>
                    <option>é¥</option>
                    <option>å¥ˆæ™º</option>
                    <option>å¥ˆç¾æ±Ÿ</option>
                    <option>ãƒãƒ£ãƒ³</option>
                    <option>ãƒãƒ³</option>
                    <option>æœªå¸Œå­</option>
                    <option>çŸ¥ç¾</option>
                    <option>ä¸€æ™¯</option>
                    <option>å¿ƒé¢¯</option>
                </select>
            </div>
            <!-- å‡ºå‹¤ã—ãŸå¹´æœˆæ—¥ -->
            <div class="ymd">
                å‡ºå‹¤æ—¥ï¼š<select id="year" name="year"></select>
                <select id="month" name="month"></select>
                <select id="day" name="day"></select>
            </div>
        </div>
        <!-- å‡ºå‹¤ã—ãŸæ™‚é–“ -->
        <div class="inout_time">
            å‡ºå‹¤æ™‚åˆ»ï¼š<input id="intime" type="time" name="intime" step="1800"></select><br>
            é€€å‹¤æ™‚åˆ»ï¼š<input id="outtime" type="time" name="outtime" step="1800"></select>
        </div>
        <div class="save_btn">
            <input type="button" id="save" value="å…¥åŠ›å®Œäº†ğŸ“">
        </div>
    </main>

    <footer>

    </footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>

        let year = document.getElementById("year");
        let month = document.getElementById("month");
        let day = document.getElementById("day");
        let intime = document.getElementById("intime")
        let outtime = document.getElementById("outtime")
        const date = new Date();
        const thisYear = date.getFullYear();

        for (let i = 2022; i <= 2024; i++) {
            let option = document.createElement("option");
            option.setAttribute("value", i);
            option.innerHTML = i + "å¹´";
            year.appendChild(option);
            if (option.value == thisYear) {
                option.setAttribute("selected", true);
            }
        }
        for (let i = 1; i <= 12; i++) {
            let option = document.createElement("option");
            option.setAttribute("value", i);
            option.innerHTML = i + "æœˆ";
            month.appendChild(option);
            if (option.value == date.getMonth() + 1) {
                option.setAttribute("selected", true);
            }
        }
        for (let i = 1; i <= 31; i++) {
            let option = document.createElement("option");
            option.setAttribute("value", i);
            option.innerHTML = i + "æ—¥";
            day.appendChild(option);
            if (option.value == date.getDate()) {
                option.setAttribute("selected", true);
            }
        }



        // saveã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã€titleã¨textã‚’å–å¾—ã™ã‚‹
        $("#save").on("click", function () {
            const name = $("#name").val();
            const year = $("#year").val();
            const month = $("#month").val();
            const day = $("#day").val();
            const intime = $("#intime").val();
            const outtime = $("#outtime").val();
            const text = $("#text_area").val();

            // ãƒ‡ãƒ¼ã‚¿ã®é•·ã•ã‚’æŒ‡å®š
            const aaa = localStorage.length;
            console.log(aaa);

            // titleã¨textãªã©ã‚’ã¾ã¨ã‚ã‚‹
            const pack = {
                name: name,
                year: year,
                month: month,
                day: day,
                intime: intime,
                outtime: outtime,
                text: text,
            };

            // dataã‚’JSONã«å¤‰æ›
            const jsonpack = JSON.stringify(pack);

            // JSONå¤‰æ›ã—ãŸã‚‚ã®ã‚’ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«â€memoâ€ã§ä¿å­˜
            // ä¸Šæ›¸ãã•ã‚Œãªã„ã‚ˆã†ã«

            localStorage.setItem("memo" + aaa, jsonpack);

            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä½•ä»¶ã‚ã‚‹ã‹ï¼Ÿ
            // const aaa2 = localStorage.length;
            // console.log(aaa2);
        });

        console.log(kiroku);
        $("#input").val();
        $("#text_area").val();




        // clearã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã€å‰Šé™¤ï¼ˆç©ºæ¬„ã«ã™ã‚‹ï¼‰
        $("#clear").on("click", function () {
            localStorage.removeItem("memo");
            $("#text_area").val("");
            $("#name").val("åå‰");
        });


        if (localStorage.getItem("memo")) {
            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸â€memoâ€ã‚’ãƒ†ã‚­ã‚¹ãƒˆã«å–å¾—
            const data3 = localStorage.getItem("memo");
            // JSONã‚’jsã«æˆ»ã™
            const data2 = JSON.parse(data3);
            // è¡¨ç¤ºã™ã‚‹
            console.log(data2);
            $("#input").val(data2.title);
            $("#text_area").val(data2.text);
        }


    </script>

</body>

</html>